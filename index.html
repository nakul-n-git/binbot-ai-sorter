<!DOCTYPE html>
<html>
<head>
<link rel="icon" href="images/logo/BB_favicon.png" type="image/png">
<meta charset="UTF-8">
<title>BinBot AI Waste Sorter</title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.9.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8.4/dist/teachablemachine-image.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Baloo 2', cursive;
  background: url('images/background/windmill_city.gif') no-repeat center center fixed;
  background-size: cover;
  margin: 0;
  padding: 20px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: flex-start;
}

.project-header {
  text-align: center;
  height: 120px;
}

.project-logo {
  position: relative;
  top: -30px;           /* negative value pulls it upward */
}

.project-logo img {
  height: 170px;      /* adjust this for your desired size */
  width: auto;
  display: inline-block;
  vertical-align: middle;
  animation: fadeIn 1.2s ease-out forwards; /* if you want the fade-in */
}

.tagline {
  font-size: 1rem;
  color: #228B22;
  margin-top: 6px;
  font-style: italic;
}

/* reuse fadeIn from before, if desired */
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* üß† Tips Panel Styling */
.tips-panel {
  flex: 0.8;
  background: #f0fff0;
  border-radius: 20px;
  padding: 20px;
  margin-right: 20px;
  max-width: 250px;
  box-shadow: 0 0 10px rgba(50,205,50,0.3);
}

.tips-panel h2 {
  font-size: 1.6rem;
  color: #228B22;
  margin-bottom: 15px;
}

.tips-panel ul {
  list-style: none;
  padding: 0;
  font-size: 1rem;
  color: #333;
}

.tips-panel li {
  margin-bottom: 12px;
  padding-left: 10px;
  border-left: 4px solid #32CD32;
}

.rrr-logo {
  margin-top: 20px;
  text-align: center;
}

.rrr-logo img {
  width: 120px;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(50,205,50,0.3);
  transition: transform 0.3s ease;
}

.rrr-logo img:hover {
  transform: scale(1.1);
}

h1, h3, .credit-text, button, #result-box, #camera-status, #counter-table th, #counter-table td, .bin p {
  font-family: 'Baloo 2', cursive;
}

h1 {
  font-size: 2.2rem;
  font-weight: 600;
}

button {
  font-size: 1.1rem;
  font-weight: bold;
}

.credit-text {
  font-size: 0.95rem;
}

.left-panel {
  flex: 2;
  text-align: center;
  background: #ffffffcc;
  border-radius: 20px;
  padding: 20px;
  position: relative; /* ‚úÖ Needed for absolute child positioning */
}

.qr-floating {
  position: absolute;
  bottom: 12px;
  right: 12px;
  width: 80px;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
  background: #ffffff;
  padding: 4px;
}

.right-panel {
  flex: 0.6;
  margin-left: 20px;
  background: #fffdf6cc;
  border-radius: 20px;
  padding: 10px;
  max-width: 220px;
}

.credit-inline-floating {
  background-color: #fffdf6cc;
  border: 2px dashed #32CD32;
  border-radius: 12px;
  padding: 8px 16px;
  font-family: 'Baloo 2', cursive;
  font-size: 1rem;
  color: #228B22;
  text-align: center;
  display: inline-block;
  margin-bottom: 10px;
  white-space: nowrap;
  box-shadow: 0 0 8px rgba(50,205,50,0.2);
  animation: floatUp 3s ease-in-out infinite;
}

@keyframes floatUp {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.video-container {
  position: relative;
  width: 320px;
  height: 240px;
  margin: 0 auto;
}


.video-wrapper {
  position: relative;
  width: 100%;
  max-width: 480px;
  margin: 0 auto;
  border-radius: 12px;
  overflow: hidden;
}

#mascot-container {
  position: absolute;
  bottom: 10px;
  left: 10px;
  width: 100px;
  height: auto;
  z-index: 10;
}

#mascot {
  width: 100%;
  height: auto;
  animation: mascotIdle 3s ease-in-out infinite;
  transition: transform 0.3s ease;
}

@keyframes mascotIdle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* üé• Video styling (no border) */
video {
  border: none;
  border-radius: 20px;
  width: 320px;
  height: 240px;
  box-shadow: 0 0 15px rgba(50, 205, 50, 0.4);
  background-color: #f0fff0;
  transition: transform 0.3s ease;
}
video:hover {
  transform: scale(1.03);
}

/* üü® Scan frame */
.scan-frame {
  position: absolute;
  top: 40px;
  left: 80px;
  width: 160px;
  height: 160px;
  border: 3px dashed #FFC107;
  border-radius: 15px;
  z-index: 3;
  pointer-events: none;
  animation: pulseFrame 2s infinite;
  overflow: hidden; /* üîí contains the beam inside */
}
@keyframes pulseFrame {
  0%, 100% { box-shadow: 0 0 10px rgba(255, 193, 7, 0.3); }
  50% { box-shadow: 0 0 20px rgba(255, 193, 7, 0.6); }
}

.scan-beam {
  display: none;
  position: absolute;
  left: 0;
  width: 100%;
  height: 6px;
  background: linear-gradient(to right, #00ff00, #009900, #00ff00);
  animation: beam-sweep 2s linear infinite;
  box-shadow: 0 0 12px #00ff00, 0 0 20px #009900;
  opacity: 0.9;
  z-index: 4;
}

@keyframes beam-sweep {
  0%   { top: 0; }
  50%  { top: calc(100% - 6px); }
  100% { top: 0; }
}

.scan-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.1rem;
  font-weight: bold;
  color: #FFC107;
  
  z-index: 4;
  pointer-events: none;
  animation: fadePulse 2s infinite;
}

@keyframes fadePulse {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

/* üì∏ Fullscreen Photo Popup Overlay */
.photo-popup {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(241, 248, 233, 0.95); /* soft green tint */
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 0 20px rgba(76, 175, 80, 0.4);
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

/* Hide by default */
.photo-popup.hidden {
  display: none;
}

/* üì¶ Photo Frame Container */
.photo-frame {
  text-align: center;
  background: transparent;
  border-radius: 12px;
  padding: 16px;
  max-width: 220px;
  width: 100%;
}

/* üß† Title */
.photo-frame h4 {
  margin-bottom: 12px;
  font-size: 1.2rem;
  color: #2e7d32;
  font-weight: 600;
}

/* üñºÔ∏è Canvas Styling */
#photo-canvas {
  width: 160px;
  height: 160px;
  border: 2px solid #81c784;
  border-radius: 8px;
  box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
  background-color: #f9fbe7;
}

#close-photo {
  position: absolute;
  top: 12px;
  right: 12px;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  color: #2e7d32;
  cursor: pointer;
  z-index: 20;
  padding: 0;
  line-height: 1;
}

#close-photo:hover {
  color: #1b5e20;
}

h1 {color:#333;font-size:2rem;margin-bottom:5px;}
.credit-text {font-size:0.9rem;color:#444;margin-top:0;margin-bottom:15px;}
<!-- .big-identify-button {
  padding: 15px 30px;
  font-size: 1.3rem;
  border-radius: 18px;
  background-color: #4CAF50;
  color: #fff;
  margin-top: 15px;
}-->
.big-identify-button {
  padding: 15px 30px;
  font-size: 1.3rem;
  border-radius: 18px;
  background-color: #32CD32; /* Lime Green */
  color: #fff;
  margin-top: 15px;
  transition: transform 0.3s ease;
  font-weight: bold;
  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}

/* üåø Grow on Hover */
.big-identify-button:hover {
  transform: scale(1.1);
}

/* üåü Bounce on Click */
.big-identify-button:active {
  animation: bounce 0.3s;
}

@keyframes bounce {
  0%   { transform: scale(1); }
  50%  { transform: scale(0.95); }
  100% { transform: scale(1); }
}

@keyframes sparkFlash {
  0% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1.5); }
  100% { opacity: 0; transform: scale(0); }
}

#result-box {
  font-size: 1.3rem;
  font-weight: bold;
  padding: 15px;
  border-radius: 15px;
  display: inline-block;
  width: 320px;
  text-align: center;
  transition: background-color 0.4s ease, box-shadow 0.4s ease, color 0.4s ease;
}
button {
  padding: 10px 16px;
  margin: 5px;
  font-size: 1rem;
  border: none;
  border-radius: 12px;
  background-color: #ffb347;
  color: #333;
  cursor: pointer;
  font-weight: bold;
}

#leaf-burst-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 9999;
}

.leaf {
  position: absolute;
  font-size: 2rem;
  animation: leaf-fall 1.2s ease-out forwards;
}

@keyframes leaf-fall {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(100vh) scale(0.5) rotate(360deg);
  }
}

#green-score-box {
  font-size: 1.2rem;
  font-weight: bold;
  color: #2e7d32;
  background-color: #e8f5e9;
  border: 2px solid #81c784;
  border-radius: 8px;
  padding: 8px 16px;
  margin-top: 10px;
  text-align: center;
  box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

#green-score-box.pulse {
  animation: scorePulse 0.6s ease-out;
}

@keyframes scorePulse {
  0%   { transform: scale(1); box-shadow: 0 0 10px rgba(76, 175, 80, 0.3); }
  50%  { transform: scale(1.1); box-shadow: 0 0 20px rgba(76, 175, 80, 0.6); }
  100% { transform: scale(1); box-shadow: 0 0 10px rgba(76, 175, 80, 0.3); }
}

#bin-info-card {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(255, 248, 225, 0.95);
  border: 2px solid #ffcc80;
  border-radius: 16px;
  padding: 24px 32px;
  box-shadow: 0 0 30px rgba(255, 193, 7, 0.4);
  z-index: 999;
  max-width: 400px;
  width: 90%;
  text-align: center;
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
}

#bin-info-card.show {
  opacity: 1;
  pointer-events: auto;
}

.card-content {
  position: relative;
}

.close-icon {
  position: absolute;
  top: -10px;
  right: -10px;
  background-color: #ffcc80;
  border-radius: 50%;
  padding: 6px 10px;
  font-size: 1rem;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0,0,0,0.2);
}

#bin-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-size: 1.6rem;
  margin-bottom: 12px;
  color: #4e342e;
}

.bin-icon {
  width: 40px;
  height: 40px;
  object-fit: contain;
}

#bin-items {
  list-style: none;
  padding: 0;
  margin: 0 0 12px 0;
  font-size: 1.1rem;
  color: #5d4037;
}

#bin-items li::before {
  content: "‚Ä¢ ";
  color: #8bc34a;
}

.bin-outcome {
  font-size: 1rem;
  color: #388e3c;
  font-style: italic;
}

/* üåø RRR Popup Panel */
#rrr-popup {
  position: fixed;
  top: 0;
  right: -100%;
  width: 80vw;
  height: 100vh;
  background-color: rgba(232, 245, 233, 0.95);
  border-left: 4px solid #81c784;
  box-shadow: -4px 0 20px rgba(76, 175, 80, 0.3);
  z-index: 999;
  transition: right 0.5s ease;
}

#rrr-popup.show {
  right: 0;
}

/* üìã RRR Content Area */
.rrr-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 40px 32px;
  overflow-y: auto;
  font-size: 1.2rem;
  color: #2e7d32;
}

/* ‚ùå Close Button */
.rrr-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background-color: #c5e1a5;
  border-radius: 50%;
  padding: 8px 12px;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* üì¶ Layout: Text + Mascot Side-by-Side */
.rrr-layout {
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
  height: 100%;
}

/* üìÑ Left Column: Text */
.rrr-text {
  flex: 1 1 60%;
  min-width: 280px;
}

/* ü§ñ Right Column: Mascot */
.rrr-mascot {
  flex: 1 1 35%;
  display: flex;
  align-items: center;     /* Push mascot lower */
  justify-content: center;   /* Center horizontally */
  min-width: 200px;
  padding-bottom: 40px;      /* Add spacing from bottom */
}

.rrr-mascot img {
  width: 250px;
  height: auto;
  max-height: 500px;
}

/* üè∑Ô∏è Title */
.rrr-content h2 {
  font-size: 2rem;
  margin-bottom: 20px;
  text-align: center;
}

/* üå± Benefit Line */
.rrr-benefit {
  margin-top: 24px;
  font-style: italic;
  font-size: 1.1rem;
  color: #388e3c;
  text-align: center;
}

/* üìö Section Styling */
.rrr-section {
  margin-bottom: 24px;
}

.rrr-section h3 {
  font-size: 1.3rem;
  color: #2e7d32;
  margin-bottom: 8px;
}

.rrr-section p,
.rrr-section ul {
  font-size: 1.1rem;
  color: #4e342e;
}

.rrr-section ul {
  list-style: disc;
  padding-left: 20px;
}

#green-score-box.pulse::after {
  content: attr(data-points);
  position: absolute;
  top: -20px;
  right: 10px;
  font-size: 1.2rem;
  color: #388e3c;
  background-color: #e8f5e9;
  border: 1px solid #81c784;
  border-radius: 8px;
  padding: 4px 8px;
  animation: scoreBurst 3s ease-out forwards;
}

@keyframes scoreBurst {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-30px); }
}

#green-score-box[data-points^="-"]::after {
  color: #c62828; /* red for penalty */
  background-color: #ffebee;
  border-color: #ef9a9a;
}

.rrr-caption {
  font-size: 1rem;
  color: #2e7d32;
  text-align: center;
  margin-top: 6px;
  font-style: italic;
}

.left-panel {
  position: relative; /* ensure positioning context */
}

.eco-help-corner {
  position: absolute;
  top: 16px;
  right: 16px;
  background-color: #c8e6c9;
  color: #2e7d32;
  border-radius: 16px;
  padding: 8px 14px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
  transition: transform 0.3s ease;
  z-index: 10;
}

.eco-help-corner:hover {
  transform: scale(1.05);
}

/* üåç Eco Help Overlay Panel */
#eco-help-overlay {
  position: fixed;
  top: 0;
  right: -100%;
  width: 80vw;
  height: 100vh;
  background-color: rgba(232, 245, 233, 0.95);
  border-left: 4px solid #81c784;
  box-shadow: -4px 0 20px rgba(76, 175, 80, 0.3);
  z-index: 999;
  transition: right 0.5s ease;
}

#eco-help-overlay.show {
  right: 0;
}

/* üìã Eco Help Content Area */
.eco-help-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 40px 32px;
  overflow-y: auto;
  font-size: 1.2rem;
  color: #2e7d32;
}

/* ‚ùå Close Button */
.eco-help-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background-color: #c5e1a5;
  border-radius: 50%;
  padding: 8px 12px;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* üì¶ Layout: Text + Mascot Side-by-Side */
.eco-layout {
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
  height: 100%;
}

/* üìÑ Left Column: Text */
.eco-text {
  flex: 1 1 60%;
  min-width: 280px;
}

/* ü§ñ Right Column: Mascot */
.eco-mascot-side {
  flex: 1 1 35%;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 200px;
  padding-bottom: 40px;
}

.eco-mascot {
  width: 280px;
  height: auto;
  max-height: 500px;
}

/* üè∑Ô∏è Title */
.eco-help-content h2 {
  font-size: 2rem;
  margin-bottom: 20px;
  text-align: center;
}

/* üå± Benefit Line */
.eco-benefit {
  margin-top: 24px;
  font-style: italic;
  font-size: 1.1rem;
  color: #388e3c;
  text-align: center;
}

/* üìö Section Styling */
.eco-section {
  margin-bottom: 24px;
}

.eco-section h3 {
  font-size: 1.3rem;
  color: #2e7d32;
  margin-bottom: 8px;
}

.eco-section p,
.eco-section ul {
  font-size: 1.1rem;
  color: #4e342e;
}

.eco-section ul {
  list-style: disc;
  padding-left: 20px;
}

/* Burst Overlay Container */
#project-burst-overlay {
  position: fixed;
  top: 0;
  right: -100%;
  width: 100vw;
  height: 100vh;
  background-color: rgba(232, 245, 233, 0.95);
  border-left: 4px solid #81c784;
  box-shadow: -4px 0 20px rgba(76, 175, 80, 0.3);
  z-index: 999;
  transition: right 0.5s ease;
}

#project-burst-overlay.show {
  right: 0;
}

/* Content Area */
.project-burst-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 40px 32px;
  overflow-y: auto;
  font-size: 1.2rem;
  color: #2e7d32;
}

/* Close Button */
.project-burst-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background-color: #c5e1a5;
  border-radius: 50%;
  padding: 8px 12px;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0,0,0,0.2);
}

/* Layout: Text + Mascot Side-by-Side */
.burst-layout {
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
}

/* Left Column: Text */
.burst-text {
  flex: 1 1 60%;
  min-width: 280px;
}

/* Right Column: Mascot */
.burst-mascot-side {
  flex: 1 1 35%;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 200px;
}

.burst-mascot {
  width: 300px;
  height: auto;
  max-height: 500px;
}

/* Logo at Top of Text */
.burst-logo-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 20px;
}

.burst-logo-text {
  font-size: 2.5rem;
  font-weight: bold;
  color: #2e7d32;
  text-align: center;
  font-family: 'Segoe UI', sans-serif;
  letter-spacing: 1px;
  animation: logoPop 0.5s ease-out;
}


/* Section Styling */
.project-burst-content h2 {
  font-size: 2rem;
  margin-bottom: 20px;
  text-align: center;
}

.burst-section {
  margin-bottom: 24px;
}

.burst-section h3 {
  font-size: 1.3rem;
  color: #2e7d32;
  margin-bottom: 8px;
}

.burst-section p,
.burst-section ul {
  font-size: 1.1rem;
  color: #4e342e;
}

.burst-section ul {
  list-style: disc;
  padding-left: 20px;
}

/* Tagline */
.burst-tagline {
  font-style: italic;
  font-size: 1.2rem;
  color: #388e3c;
  text-align: center;
  margin-top: 20px;
}

.project-info-corner {
  position: absolute;
  top: 20px;
  left: 20px;
  background-color: #c8e6c9;
  color: #2e7d32;
  padding: 8px 12px;
  border-radius: 12px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
  z-index: 1000;
}

.project-info-corner:hover {
  transform: scale(1.05);
}

.project-info-corner.hidden {
  display: none;
}

#webcam {
  transform: scaleX(-1); /* Flips horizontally */
}

#video-container {
  position: relative;
}

.mobile-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  background-color: #f0f4c3; /* üçã Soft lemon-lime for gentle contrast */
  color: #33691e;
  border-radius: 16px;
  padding: 8px 14px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
  transition: transform 0.3s ease;
  z-index: 10;
  animation: pulseGlow 2.5s infinite;
}

.mobile-button:hover {
  transform: scale(1.05);
}

/* Pulse animation */
@keyframes pulseGlow {
  0% {
    box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 14px rgba(139, 195, 74, 0.5);
    transform: scale(1.04);
  }
  100% {
    box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
    transform: scale(1);
  }
}


/* Fullscreen translucent overlay */
.qr-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.8); /* translucent white */
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
}

/* Centered QR content */
.qr-popup-content img {
  width: 300px;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(76, 175, 80, 0.3);
}

.qr-message {
  font-size: 1.1rem;
  font-weight: 600;
  color: #2e7d32;
  margin-bottom: 12px;
}

.info-button {
  position: absolute;
  bottom: 16px;
  left: 16px;
  background-color: #f0f4c3; /* üçã Soft lime-yellow for gentle attention */
  color: #33691e;
  border-radius: 16px;
  padding: 8px 14px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
  transition: transform 0.3s ease;
  z-index: 10;
  animation: pulseGlow 2.5s infinite;
}

.info-button:hover {
  transform: scale(1.05);
}

/* Reuse pulse animation */
@keyframes pulseGlow {
  0% {
    box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 14px rgba(139, 195, 74, 0.5);
    transform: scale(1.04);
  }
  100% {
    box-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
    transform: scale(1);
  }
}

.instruction-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  padding: 20px;
}

.instruction-content {
  background: #f1f8e9;
  border-radius: 20px;
  padding: 24px;
  box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
  color: #2e7d32;
  font-family: 'Segoe UI', sans-serif;
  max-width: 480px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  text-align: left;
  position: relative;
}

.instruction-content h2 {
  font-size: 1.5rem;
  margin-bottom: 16px;
  text-align: center;
}

.instruction-content ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.instruction-content li {
  font-size: 1rem;
  margin-bottom: 10px;
}

.instruction-content li strong {
  background-color: rgba(200, 230, 201, 0.6); /* üçÉ translucent green */
  color: #2e7d32;
  padding: 4px 10px;
  border-radius: 12px;
  font-weight: 600;
  box-shadow: 0 0 6px rgba(76, 175, 80, 0.2);
  transition: transform 0.3s ease;
  display: inline-block;
  font-size: 0.95rem;
}

.instruction-content li strong:hover {
  transform: scale(1.05);
}

/* Close button */
.close-button {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  font-size: 1.2rem;
  color: #2e7d32;
  cursor: pointer;
}

button:hover {background-color: #ff9844;}
#counter-table {margin:0 auto;border-collapse:collapse;width:100%;}
#counter-table th,#counter-table td {border:2px solid #ffb347;padding:6px;font-size:0.9rem;text-align:center;}
#counter-table th {background-color:#ffb347;color:#333;}
.bins {display:flex;justify-content:center;gap:20px;margin-top:15px;}
.bin {text-align:center;width:100px;position:relative;}
.bin img {
  width:80px;height:80px;border:5px solid transparent;border-radius:20px;
  transition:transform 0.5s,border 0.3s;background:#f9f9f9;padding:5px;
}
.bin.active img {border:5px solid #4CAF50;animation:bounce 0.6s;}
.bin p {font-size:0.8rem;margin-top:5px;}
@keyframes bounce {
0%,20%,50%,80%,100%{transform:translateY(0);}40%{transform:translateY(-10px);}60%{transform:translateY(-5px);}}
</style>
</head>
<body>
<div class="tips-panel">
  <h2>‚ôªÔ∏è Sorting Tips</h2>
  <ul>
    <li><strong>Plastic:</strong> Bottles, wrappers, containers. Rinse before recycling!</li>
    <li><strong>Paper:</strong> Newspapers, notebooks, cardboard. Keep it dry!</li>
    <li><strong>Organic:</strong> Food scraps, leaves, peels. Compost if possible!</li>
    <li><strong>Mixed items:</strong> Separate parts before sorting (e.g., plastic + paper).</li>
    <li><strong> Reuse before recycle</strong></li>
  </ul>
  <div class="rrr-logo">
  <img src="images/page_assets/rrr_logo.gif" alt="RRR Logo" onclick="showRRR()" style="cursor: pointer;">
  <p class="rrr-caption">Tap the logo to explore RRR and its eco benefits!</p>

</div>
</div>
  <div class="left-panel">
  
   <div class="project-header">
  <div class="project-logo">
  <img src="images/logo/binbot.png" alt="BinBot AI logo">
</div>

<div class="project-info-corner" onclick="showProjectBurst()">‚ÑπÔ∏è About BinBot AI</div>

  <div class="eco-help-corner" onclick="showEcoHelp()">üå± Want to help the planet?</div>
</div>

   <div class="credit-inline-floating">
 üåü Project by <strong>Nakul Nagarajan & R. Navish</strong>, Class 4, AECS Palayakkayal üåü
</div>	


<div class="video-container">
  <div class="video-wrapper">
    <!-- üé• Webcam Feed -->
    <video id="webcam" autoplay playsinline></video>

    <!-- üü® Scan Frame -->
    <div class="scan-frame">
      <div class="scan-beam"></div>
    </div>

    <!-- üìù Scan Text -->
    <div class="scan-text">Show item here</div>

    <!-- ü§ñ BinBot Mascot -->
    <div id="mascot-container">
      <img id="mascot" src="images/logo/BB.png" alt="BinBot waving mascot">
    </div>

    <!-- üì∏ BinBot's View Popup -->
    <div id="photo-popup" class="photo-popup hidden">
      <div class="photo-frame">
        <h3>ü§ñ What BinBot saw</h3>
        <canvas id="photo-canvas" width="160" height="160"></canvas>
        <button id="close-photo">‚úñ</button>
      </div>
    </div>
  </div>
</div>

    <button class="big-identify-button" onclick="identifyOnce()">Identify Item</button>
   <p> <div id="result-box">Waiting for identification...</div> </p>
   
   <div class="bins">
  <div class="bin" id="bin-plastic" onclick="showBinInfo('plastic')">
    <img src="images/bin/plastic.png" alt="Plastic Bin">
  </div>
  <div class="bin" id="bin-paper" onclick="showBinInfo('paper')">
    <img src="images/bin/paper.png" alt="Paper Bin">
  </div>
  <div class="bin" id="bin-organic" onclick="showBinInfo('organic')">
    <img src="images/bin/organic.png" alt="Organic Bin">
  </div>
</div>

<!-- Mobile Button -->
<button class="mobile-button" onclick="showQRPopup()"> üì± Use BinBot on your Mobile</button>

<!-- Fullscreen QR Overlay -->
<div id="qr-overlay" class="qr-overlay" onclick="hideQRPopup()">
  <div class="qr-popup-content">
    <p class="qr-message">Scan to use BinBot AI on your mobile</p>
    <img src="images/page_assets/qr.png" alt="Scan to visit BinBot" />
  </div>
</div>

<!-- Bottom-left button -->
<div class="info-button" onclick="showInstructions()">üß† How to Use BinBot</div>

	<div id="bin-info-card" class="hidden">
  <div class="card-content">
    <div class="close-icon" onclick="hideBinInfo()">‚ùå</div>
    <h2 id="bin-title">
  <img id="bin-icon" src="" alt="Bin Icon" class="bin-icon">
  <span id="bin-label">Bin Title</span>
</h2>
    <ul id="bin-items"></ul>
    <p id="bin-outcome" class="bin-outcome"></p>
  </div>
</div>



  </div>
  

  
  <!-- Dropping item -->
<div id="drop-item" style="
  position: absolute;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 3rem;
  opacity: 0;
  pointer-events: none;
  transition: top 2s ease, left 1s ease, opacity 1s ease;
">
  üóëÔ∏è
</div>

<!-- Spark effect -->
<div id="spark" style="
  position: absolute;
  top: 0;
  left: 0;
  font-size: 1.5rem;
  opacity: 0;
  pointer-events: none;
">
  ‚ú®
</div>

  <div class="right-panel">
  

<audio id="bg-audio" src="sounds/nature.mp3" loop preload="auto"></audio>
<audio id="chime-sound" src="sounds/success.mp3" preload="auto"></audio>
   <!-- <h3>Camera Controls</h3>
    <div class="camera-buttons">
      <button onclick="startCamera()">Start Camera</button>
      <button onclick="stopCamera()">Stop Camera</button>
    </div>
    <div id="camera-status">Camera Off</div> -->
	
	<!-- Green Score Display -->
<div id="green-score-box">üåø Green Score: 0</div>

    <h3>Items Count</h3>
    <table id="counter-table">
      <thead><tr><th>Item</th><th>Count</th></tr></thead>
      <tbody id="counter-body"></tbody>
    </table>
    <button onclick="resetCounts()">Reset Counts</button>
	
	<div class="control-section">
  <h3 class="section-title">Camera Controls</h3>
  <div class="button-group">
    <button onclick="startCamera()">üé•</button>
    <button onclick="stopCamera()">‚ùåüé•
</button>
  </div>
  <div id="camera-status"> Camera: Off</div>
  
  <h3>Music Controls</h3>
	<div class="music-controls-row">
  <button id="play-music" title="Play Music">‚ñ∂Ô∏è</button>
  <button id="stop-music" title="Stop Music">‚èπÔ∏è</button>
  <button id="mute-toggle" title="Mute/Unmute">'üîá</button>
</div>

<div id="music-status"> Music: Stopped</div>
</div>
	
	


  </div>
<script>
const URL = "./";
let model, videoStream;
let counters = {};

document.addEventListener("DOMContentLoaded", function () {
    const isMobileDevice = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    const isSmallScreen = window.innerWidth < 600;

    if (isMobileDevice || isSmallScreen) {
      window.location.href = "mobile.html";
    }
  });

window.addEventListener("DOMContentLoaded", async () => {
  const modelURL = URL + "model.json";
  const metadataURL = URL + "metadata.json";

  // Show loading message
  const resultBox = document.getElementById("result-box");
  resultBox.textContent = "ü§ñ Loading BinBot's brain...";

  // Load model
  model = await tmImage.load(modelURL, metadataURL);
  console.log("‚úÖ Model loaded");

  // Initialize counters
  model.getClassLabels().forEach(label => counters[label] = 0);
  const tbody = document.getElementById("counter-body");
  for (let label of model.getClassLabels()) {
    tbody.innerHTML += `<tr><td>${label}</td><td id="count-${label}">0</td></tr>`;
  }

  // üî• Warm-up with blank canvas
  const dummyCanvas = document.createElement("canvas");
  dummyCanvas.width = 160;
  dummyCanvas.height = 160;
  const dummyCtx = dummyCanvas.getContext("2d");
  dummyCtx.fillStyle = "#fff";
  dummyCtx.fillRect(0, 0, 160, 160);
  await model.predict(dummyCanvas);
  console.log("‚úÖ Model warmed up");

  // Update UI
  resultBox.textContent = "Waiting for identification...";
});

const bgAudio = document.getElementById('bg-audio');
const musicStatus = document.getElementById('music-status');


document.getElementById('play-music').addEventListener('click', () => {
  bgAudio.volume = 0.5;
  bgAudio.muted = false;
  bgAudio.play()
    .then(() => updateMusicStatus())
    .catch(err => console.error('Playback failed:', err));
});

document.getElementById('stop-music').addEventListener('click', () => {
  bgAudio.pause();
  bgAudio.currentTime = 0;
  updateMusicStatus();
});

document.getElementById('mute-toggle').addEventListener('click', () => {
  bgAudio.muted = !bgAudio.muted;
  updateMusicStatus();
});

function showQRPopup() {
  const overlay = document.getElementById("qr-overlay"); // ‚úÖ Define the variable first
  overlay.style.display = "flex";


  // Voice feedback
  const msg = new SpeechSynthesisUtterance("Scan to use BinBot AI on your mobile");
  msg.pitch = 1.3;
  msg.rate = 0.9;
  msg.volume = 1;
  
  msg.voice = speechSynthesis.getVoices().find(v => v.lang.includes("en") && v.name.includes("aria"));
  speechSynthesis.speak(msg);

// Auto-close after 3 seconds
  setTimeout(() => {
    overlay.style.display = "none";
    speechSynthesis.cancel(); // Stop voice if still speaking
  }, 7000);
}


function hideQRPopup() {
  document.getElementById("qr-overlay").style.display = "none";
  speechSynthesis.cancel(); // Stop voice if overlay is clicked
}

function showInstructions() {
  document.getElementById("instruction-overlay").style.display = "flex";

  const msg = new SpeechSynthesisUtterance("Welcome to BinBot AI. Hold an item in front of the camera and tap Identify Item. BinBot will help you sort it correctly.");
  msg.pitch = 1.3;
  msg.rate = 0.8;
  ms.volume=1;
  msg.voice = speechSynthesis.getVoices().find(v => v.lang.includes("en") && v.name.includes("aria"));
  speechSynthesis.speak(msg);
}

function hideInstructions() {
  document.getElementById("instruction-overlay").style.display = "none";
  speechSynthesis.cancel();
}

function updateMusicStatus() {
  if (bgAudio.paused || bgAudio.currentTime === 0) {
    musicStatus.textContent = 'Music: Stopped';
  } else if (bgAudio.muted) {
    musicStatus.textContent = 'Music: Muted';
  } else {
    musicStatus.textContent = 'Music: Playing';
  }
}

async function startCamera() {
  const video = document.getElementById("webcam");
  if (!videoStream) {
    try {
      videoStream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = videoStream;
      video.play();
      document.getElementById("camera-status").textContent = "Camera On";
      speakCameraStatus("Camera is now on. Place your item in view.");
    } catch (err) {
      console.error("Camera error:", err);
      speakCameraStatus("Oops! I couldn't access the camera.");
    }
  }
}

function stopCamera() {
  if (videoStream) {
    videoStream.getTracks().forEach(track => track.stop());
    videoStream = null;
    document.getElementById("camera-status").textContent = "Camera Off";
    document.getElementById("webcam").srcObject = null;
    speakCameraStatus("Camera has been turned off.");
  }
  clearBinHighlights();
}

function speakCameraStatus(message) {
  const utterance = new SpeechSynthesisUtterance(message);
  utterance.rate = 0.9;
  utterance.pitch = 1.3;
  utterance.volume = 1;
  

  const voices = speechSynthesis.getVoices();
  const preferredVoice = voices.find(v =>
    v.lang.startsWith("en") && v.name.toLowerCase().includes("aria")
  );
  if (preferredVoice) {
    utterance.voice = preferredVoice;
  }

  speechSynthesis.speak(utterance);
}

function triggerLeafBurst(className) {
  const container = document.getElementById('leaf-burst-container');

  // Choose leaf type based on class
  let leafType = 'üçÉ'; // default
  const lc = className.toLowerCase();
  if (lc.includes('plastic')) leafType = 'üçÅ';     // bold, synthetic feel
  if (lc.includes('paper'))   leafType = 'üçÇ';     // crisp and fluttery
  if (lc.includes('organic')) leafType = 'üåø';     // soft and natural

  for (let i = 0; i < 12; i++) {
    const leaf = document.createElement('span');
    leaf.className = 'leaf';
    leaf.textContent = leafType;
    leaf.style.left = Math.random() * 100 + 'vw';
    leaf.style.animationDelay = (Math.random() * 0.5) + 's';
    leaf.style.fontSize = (1.5 + Math.random()) + 'rem';
    container.appendChild(leaf);
    setTimeout(() => container.removeChild(leaf), 1500);
  }
}

function playChime() {
  const chime = document.getElementById('chime-sound');
  chime.currentTime = 0;
  chime.volume = 0.6;
  chime.play().catch(err => console.error('Chime playback failed:', err));
}

const scoreWeights = {
  organic: 5,
  paper: 3,
  plastic: -1
};

let greenScore = 0;

function updateGreenScoreDisplay(points = 0) {
  const scoreBox = document.getElementById('green-score-box');
  scoreBox.textContent = `üåø Green Score: ${greenScore}`;

  const prefix = points > 0 ? '+' : ''; // no double minus
  scoreBox.setAttribute('data-points', `${prefix}${points}`);
  scoreBox.classList.add('pulse');
  setTimeout(() => scoreBox.classList.remove('pulse'), 1000);
}

function showBinInfo(binType) {
  const card = document.getElementById('bin-info-card');
  const icon = document.getElementById('bin-icon');
  const label = document.getElementById('bin-label');
  const items = document.getElementById('bin-items');
  const outcome = document.getElementById('bin-outcome');

  let binData = {
    plastic: {
      label: "Plastic Bin",
      icon: "images/page_assets/plastic_icon.png",
      items: ["Bottles", "Wrappers", "Containers", "Bags"],
      outcome: "These are recycled into new plastic products!"
    },
    paper: {
      label: "Paper Bin",
      icon: "images/page_assets/paper_icon.png",
      items: ["Newspapers", "Cardboard", "Notebooks", "Envelopes"],
      outcome: "These are pulped and reused to make fresh paper!"
    },
    organic: {
      label: "Organic Bin",
      icon: "images/page_assets/organic_icon.png",
      items: ["Fruit peels", "Veggie scraps", "Tea leaves", "Garden waste"],
      outcome: "These turn into compost that helps plants grow!"
    }
  };

  const data = binData[binType] || {
    label: "Unknown Bin",
    icon: "",
    items: [],
    outcome: "No info available."
  };

  icon.src = data.icon;
  label.textContent = data.label;
  items.innerHTML = data.items.map(item => `<li>${item}</li>`).join('');
  outcome.textContent = data.outcome;

  card.classList.add('show');
}

function hideBinInfo() {
  document.getElementById('bin-info-card').classList.remove('show');
}

function showRRR() {
  document.getElementById('rrr-popup').classList.add('show');
  document.querySelector('.project-info-corner').classList.add('hidden');
  speakRRR();
}

function hideRRR() {
  document.getElementById('rrr-popup').classList.remove('show');
  document.querySelector('.project-info-corner').classList.remove('hidden');
}

function showEcoHelp() {
  const overlay = document.getElementById('eco-help-overlay');
  overlay.classList.remove('hidden');
  overlay.classList.add('show');
  document.querySelector('.project-info-corner').classList.add('hidden');
  // Voice feedback
  speakEcoHelp();
}

function hideEcoHelp() {
  const overlay = document.getElementById('eco-help-overlay');
  overlay.classList.remove('show');
  overlay.classList.add('hidden');
  document.querySelector('.project-info-corner').classList.remove('hidden');
}

function showProjectBurst() {
  document.getElementById('project-burst-overlay').classList.add('show');
  document.querySelector('.project-info-corner').classList.add('hidden');
  document.body.classList.add('overlay-open');

  const speakIntro = () => {
    const intro = new SpeechSynthesisUtterance(
      "Hi! I'm BinBot AI. I use artificial intelligence to help you smartly sort your waste. Let's make our planet better, together."
    );

    // Friendly voice settings (same as speakText)
    intro.rate = 0.9;
    intro.pitch = 1.3;
    intro.volume = 1;

    // Match voice selection logic
    const voices = window.speechSynthesis.getVoices();
    const preferredVoice = voices.find(v =>
      v.lang.startsWith("en") && v.name.toLowerCase().includes("aria")
    );

    if (preferredVoice) {
      intro.voice = preferredVoice;
    }

    window.speechSynthesis.speak(intro);
  };

  // Ensure voices are loaded before speaking
  if (window.speechSynthesis.getVoices().length > 0) {
    speakIntro();
  } else {
    window.speechSynthesis.onvoiceschanged = () => {
      speakIntro();
    };
  }
}

function hideProjectBurst() {
  document.getElementById('project-burst-overlay').classList.remove('show');
  document.querySelector('.project-info-corner').classList.remove('hidden');
  document.body.classList.remove('overlay-open');
}

const identifyBtn = document.querySelector(".big-identify-button");
let hoverSpoken = false;

identifyBtn.addEventListener("mouseenter", () => {
  if (hoverSpoken || !('speechSynthesis' in window)) return;
  hoverSpoken = true;

  const utterance = new SpeechSynthesisUtterance("Click to identify the item.");
  utterance.rate = 0.9;     // same as speakText
  utterance.pitch = 1.3;    // same kid-friendly tone
  utterance.volume = 1;

  const voices = window.speechSynthesis.getVoices();
  const preferredVoice = voices.find(v =>
    v.lang.startsWith('en') && v.name.toLowerCase().includes('aria') // same logic
  );
  if (preferredVoice) {
    utterance.voice = preferredVoice;
  }

  window.speechSynthesis.speak(utterance);

  setTimeout(() => hoverSpoken = false, 4000); // reset after 4 seconds
});

function speakResetFeedback() {
  const utterance = new SpeechSynthesisUtterance("Green Score and Items Count reset. Let's start fresh and sort smart!");
  utterance.rate = 0.9;
  utterance.pitch = 1.3;
  utterance.volume = 1;

  const voices = speechSynthesis.getVoices();
  const preferredVoice = voices.find(v =>
    v.lang.startsWith("en") && v.name.toLowerCase().includes("aria")
  );
  if (preferredVoice) {
    utterance.voice = preferredVoice;
  }

  speechSynthesis.speak(utterance);
}

function speakEcoHelp() {
  const utterance = new SpeechSynthesisUtterance("We do not inherit the Earth from our ancestors, we borrow it from our children.");
  utterance.rate = 0.9;
  utterance.pitch = 1.3;
  utterance.volume = 1;

  const voices = speechSynthesis.getVoices();
  const preferredVoice = voices.find(v =>
    v.lang.startsWith("en") && v.name.toLowerCase().includes("aria")
  );
  if (preferredVoice) {
    utterance.voice = preferredVoice;
  }

  speechSynthesis.speak(utterance);
}

function speakRRR() {
  const utterance = new SpeechSynthesisUtterance("Reduce what you buy, reuse what you have, recycle what you can ‚Äî and respect what remains.");
  utterance.rate = 0.9;
  utterance.pitch = 1.3;
  utterance.volume = 1;

  const voices = speechSynthesis.getVoices();
  const preferredVoice = voices.find(v =>
    v.lang.startsWith("en") && v.name.toLowerCase().includes("aria")
  );
  if (preferredVoice) {
    utterance.voice = preferredVoice;
  }

  speechSynthesis.speak(utterance);
}

function showScanBeam() {
  const beam = document.querySelector(".scan-beam");
  if (beam) beam.style.display = "block";
}

function hideScanBeam() {
  const beam = document.querySelector(".scan-beam");
  if (beam) beam.style.display = "none";
}

async function identifyOnce() {
  if (!videoStream) {
    speakCameraStatus("Please turn on the camera!");
    return;

  }

  const video = document.getElementById("webcam");
  if (video.readyState < 2 || video.videoWidth === 0 || video.videoHeight === 0) {
    console.warn("Video not ready yet");
    return;
  }

  showScanBeam(); // üîÜ Start animation

  const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");
canvas.width = 160;
canvas.height = 160;

// Get actual video resolution
const videoWidth = video.videoWidth;
const videoHeight = video.videoHeight;

// Get displayed video size
const displayWidth = video.offsetWidth;
const displayHeight = video.offsetHeight;

// Calculate scale factors
const scaleX = videoWidth / displayWidth;
const scaleY = videoHeight / displayHeight;

// Match your .scan-frame position (top: 40px, left: 80px)
const cropX = 80 * scaleX;
const cropY = 40 * scaleY;
const cropWidth = 160 * scaleX;
const cropHeight = 160 * scaleY;

// Crop and draw
ctx.drawImage(video, cropX, cropY, cropWidth, cropHeight, 0, 0, 160, 160);

// Predict using cropped canvas
const prediction = await model.predict(canvas);

// Find highest confidence class
let highestClass = prediction[0].className;
let highestProb = prediction[0].probability;
for (let i = 1; i < prediction.length; i++) {
  if (prediction[i].probability > highestProb) {
    highestClass = prediction[i].className;
    highestProb = prediction[i].probability;
  }
}

const percent = (highestProb * 100).toFixed(1) + "%";
const resultBox = document.getElementById("result-box");

// Choose emoji based on class
let emoji = "üå±";
if (highestClass.toLowerCase().includes("plastic")) emoji = "üß¥";
if (highestClass.toLowerCase().includes("paper")) emoji = "üì∞";
if (highestClass.toLowerCase().includes("organic")) emoji = "üçé";

// Confidence threshold logic
if (highestProb >= 0.85) {
  resultBox.textContent = `${emoji} Identified: ${highestClass} (${percent})`;
  highlightBin(highestClass);
  speakText(highestClass);
  triggerLeafBurst(highestClass);
  playChime();
} else {
  resultBox.textContent = `ü§î Still thinking... (${percent})`;
  speakCameraStatus("Hmm... I‚Äôm not confident yet. Let me take another look!");
}
  
  
const photoCanvas = document.getElementById("photo-canvas");
const photoCtx = photoCanvas.getContext("2d");
photoCtx.drawImage(canvas, 0, 0);

// ‚è≥ Delay popup by 2 seconds
setTimeout(() => {
  document.getElementById("photo-popup").classList.remove("hidden");
}, 2000);

document.getElementById("close-photo").addEventListener("click", () => {
  document.getElementById("photo-popup").classList.add("hidden");
});

  

  let color = "#4CAF50";
  let textColor = "#fff";
  let boxShadow = "0 0 15px rgba(76, 175, 80, 0.6)";

  if (highestClass.toLowerCase().includes("plastic")) {
    color = "#F44336";
    boxShadow = "0 0 15px rgba(244, 67, 54, 0.6)";
  }
  if (highestClass.toLowerCase().includes("paper")) {
    color = "#FFC107";
    textColor = "#333";
    boxShadow = "0 0 15px rgba(255, 193, 7, 0.6)";
  }
  if (highestClass.toLowerCase().includes("organic")) {
    color = "#4CAF50";
    boxShadow = "0 0 15px rgba(76, 175, 80, 0.6)";
  }

  const dropItem = document.getElementById("drop-item");
  const spark = document.getElementById("spark");

  dropItem.textContent = emoji;
  dropItem.style.opacity = "1";

  let binElement;
  if (highestClass.toLowerCase().includes("plastic")) binElement = document.getElementById("bin-plastic");
  if (highestClass.toLowerCase().includes("paper")) binElement = document.getElementById("bin-paper");
  if (highestClass.toLowerCase().includes("organic")) binElement = document.getElementById("bin-organic");

  if (binElement) {
    const binRect = binElement.getBoundingClientRect();
    dropItem.style.left = `${binRect.left + binRect.width / 2}px`;
    dropItem.style.top = `${binRect.top - 40}px`;

    spark.style.left = `${binRect.left + binRect.width / 2 - 10}px`;
    spark.style.top = `${binRect.top - 20}px`;
    spark.style.opacity = "1";
    spark.style.animation = "sparkFlash 0.6s ease forwards";
  }

  setTimeout(() => {
    dropItem.style.opacity = "0";
    dropItem.style.top = "100px";
    dropItem.style.left = "50%";
    spark.style.opacity = "0";
    spark.style.animation = "none";
  }, 1500);

  resultBox.style.backgroundColor = color;
  resultBox.style.color = textColor;
  resultBox.style.boxShadow = boxShadow;

  counters[highestClass] += 1;
  const el = document.getElementById(`count-${highestClass}`);
  if (el) el.textContent = counters[highestClass];

  try {
    const binClassKey = highestClass.toLowerCase();
    let pointsEarned = 0;

    if (binClassKey.includes("organic")) {
      pointsEarned = scoreWeights.organic;
    } else if (binClassKey.includes("paper")) {
      pointsEarned = scoreWeights.paper;
    } else if (binClassKey.includes("plastic")) {
      pointsEarned = scoreWeights.plastic;
    }

    greenScore += pointsEarned;
    updateGreenScoreDisplay(pointsEarned);
  } catch (err) {
    console.error("Scoring error:", err);
  }

  

// ‚è≥ Hide scan beam after 2 seconds
setTimeout(() => {
  hideScanBeam();
}, 2000);

// ‚è≥ Reset result and hide photo popup after 4 seconds
setTimeout(() => {
  resultBox.textContent = "Waiting for identification...";
  resultBox.style.backgroundColor = "transparent";
  resultBox.style.color = "#333";
  resultBox.style.boxShadow = "none";
  clearBinHighlights();

  // üì∏ Hide photo popup
  document.getElementById("photo-popup").classList.add("hidden");
}, 4500);
}

function resetCounts() {
  for (let key in counters) {
    counters[key] = 0;
    const el = document.getElementById(`count-${key}`);
    if (el) el.textContent = 0;
  }

  greenScore = 0;
  speakResetFeedback();
  updateGreenScoreDisplay();
  
}

function speakText(itemClass) {
  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(`Identified item is ${itemClass}`);
    
    // Friendly voice settings
    utterance.rate = 0.9;     // slightly slower for clarity
    utterance.pitch = 1.3;    // higher pitch for kid-friendly tone
    utterance.volume = 1;     // full volume

    // Optional: pick a natural voice
    const voices = window.speechSynthesis.getVoices();
    const preferredVoice = voices.find(v =>
      v.lang.startsWith('en') && v.name.toLowerCase().includes('aria') // or 'samantha', 'rishi', etc.
    );
    if (preferredVoice) {
      utterance.voice = preferredVoice;
    }

    window.speechSynthesis.speak(utterance);
  }
}

function highlightBin(className){
 clearBinHighlights();
 if(className.toLowerCase().includes("plastic")){
   document.getElementById("bin-plastic").classList.add("active");}
 else if(className.toLowerCase().includes("paper")){
   document.getElementById("bin-paper").classList.add("active");}
 else if(className.toLowerCase().includes("organic")){
   document.getElementById("bin-organic").classList.add("active");}
 setTimeout(clearBinHighlights,800);
}
function clearBinHighlights(){
 document.getElementById("bin-plastic").classList.remove("active");
 document.getElementById("bin-paper").classList.remove("active");
 document.getElementById("bin-organic").classList.remove("active");
}
</script>
<div id="leaf-burst-container"></div>
<div id="rrr-popup" class="hidden">
  <div class="rrr-content">
    <div class="rrr-close" onclick="hideRRR()">‚ùå</div>
<h2>‚ôªÔ∏è Reduce ‚Ä¢ Reuse ‚Ä¢ Recycle</h2>
        <p class="rrr-benefit">üå± Every small action adds up to a big impact. Be a Green Hero today!</p>
    <div class="rrr-layout">
      <div class="rrr-text">
        

        <section class="rrr-section">
          <h3>üåø Why RRR Matters</h3>
          <p>Every item we sort wisely helps protect nature, reduce pollution, and save energy. RRR is the superhero trio of sustainability!</p>
        </section>

        <section class="rrr-section">
          <h3>üîç What Each Step Means</h3>
          <ul>
            <li><strong>Reduce:</strong> Choose reusable items, avoid excess packaging, and buy only what you need.</li>
            <li><strong>Reuse:</strong> Repair, repurpose, and share ‚Äî turn old things into new treasures!</li>
            <li><strong>Recycle:</strong> Sort waste correctly so materials like paper, plastic, and metal can be reborn.</li>
          </ul>
        </section>

        <section class="rrr-section">
          <h3>üéâ Benefits of RRR</h3>
          <ul>
            <li>Less garbage in landfills</li>
            <li>Cleaner air and water</li>
            <li>More trees and animals protected</li>
            <li>Lower carbon footprint</li>
            <li>Smarter, greener communities</li>
          </ul>
        </section>

        <section class="rrr-section">
          <h3>üåü Fun Fact</h3>
          <p>Recycling one aluminum can saves enough energy to run a TV for 3 hours!</p>
        </section>

        <section class="rrr-section">
          <h3>üí° What You Can Do</h3>
          <p>Start small: carry a cloth bag, reuse water bottles, and sort your waste with BinBot!</p>
        </section>
      </div>

      <div class="rrr-mascot">
        <img src="images/logo/BB_heart.png" alt="BinBot mascot smiling" />
      </div>
    </div>
  </div>
</div>

<div id="eco-help-overlay" class="hidden">
  <div class="eco-help-content">
    <div class="eco-help-close" onclick="hideEcoHelp()">‚ùå</div>
<h2>üåç How You Can Help the Planet</h2>
        <p class="eco-benefit">üå± The planet doesn‚Äôt need perfection. It needs participation. You‚Äôre part of the solution!</p>
    <div class="eco-layout">
      <div class="eco-text">
        

        <section class="eco-section">
          <h3>üß† Why Sorting Matters</h3>
          <p>Sorting waste helps protect nature, reduce pollution, and save energy. It‚Äôs a superpower for a cleaner Earth!</p>
        </section>

        <section class="eco-section">
          <h3>üéØ How You Can Help</h3>
          <ul>
            <li>Use cloth bags instead of plastic</li>
            <li>Sort waste at home and school</li>
            <li>Teach friends and family to sort waste</li>
            <li>Keep your bins clean and labeled</li>
            <li>Make art from junk ‚Äî cardboard castles, wrapper rockets, bottle cap monster</li>
            <li>Wrap Gifts in newspaper - it's stylish and saves trees</li>
            <li>Fix things instead of tossing them ‚Äî be a Repair Ranger!</li>
            <li>Donate old clothes and toys ‚Äî sharing is caring (and sorting!)</li>
          </ul>
        </section>

        <section class="eco-section">
          <h3>üåü Fun Fact</h3>
          <p>Composting one banana peel helps grow new plants and keeps soil healthy!</p>
        </section>

        <section class="eco-section">
          <h3>üèÜ Be a Green Hero</h3>
          <p>Every item you sort right earns you points and helps BinBot protect the planet!</p>
        </section>
      </div>

      <div class="eco-mascot-side">
        <img class="eco-mascot" src="images/logo/BB_earth.png" alt="BinBot mascot" />
      </div>
    </div>
  </div>
</div>

<div id="project-burst-overlay" class="hidden" onclick="hideProjectBurst()">
  <div class="project-burst-content" onclick="event.stopPropagation()">
    <div class="project-burst-close" onclick="hideProjectBurst()">‚ùå</div>
<div class="burst-logo-container">
  <h1 class="burst-logo-text">BinBot AI</h1>
</div>
 <p class="burst-tagline">üå± ‚ÄúAI enabling Sustainablity - Sorting made simple. Impact made powerful.‚Äù</p>
    <div class="burst-layout">
      <!-- Left: Text Content -->
      <div class="burst-text">
        

        <section class="burst-section">
          <h3>What Is BinBot AI?</h3>
          <p><strong>BinBot AI</strong> is a science project by Nakul and Navish that uses AI, machine learning, and coding to teach smart waste sorting. With image recognition and voice feedback, it helps users identify Organic, Paper, and Plastic items ‚Äî reducing pollution, saving energy, and protecting the planet.</p>
<section class="burst-section">
          <h3>Project Goals</h3>
          <ul>
            <li>Make AI approachable and purposeful</li>
            <li>Encourage mindful disposal habits</li>
            <li>Inspire children to become eco-leaders</li>
          </ul>
        </section>
        <section class="burst-section">
          <h3>How It Works</h3>
          <ul>
  <li><strong>AI-powered image recognition:</strong> BinBot scans and identifies waste items in real time, helping users learn what goes where with speed and accuracy.</li>
  <li><strong>Green Score system:</strong> Eco-friendly sorting earns points, encouraging compost and recycling while gently discouraging landfill waste.</li>
  <li><strong>Voice feedback for human touch:</strong> BinBot speaks in English, making sorting feel interactive and supportive.</li>
  <li><strong>Mascot designed for engagement:</strong> BinBot‚Äôs cheerful look adds warmth and personality.</li>
  <li><strong>Logo designed for clarity and charm:</strong> The BinBot AI logo uses bold, friendly visuals to reflect the project‚Äôs mission ‚Äî blending technology, sustainability, and kid-friendly appeal. It anchors the interface and reinforces brand identity across screens and displays.</li>
  <li><strong>Built for curious young minds:</strong> The interface and scoring system are playful, intuitive, and educational ‚Äî ideal for engaging young minds.</li>
  <li><strong>Teaches the 3Rs:</strong> Every interaction reinforces Reduce ‚Ä¢ Reuse ‚Ä¢ Recycle and builds lifelong sustainability habits.</li>
  <li><strong>Science meets sustainability:</strong> BinBot AI blends cutting-edge technology with climate-conscious values to inspire real-world impact.</li>		
          </ul>
        </section>

      </div>

      <!-- Right: Mascot -->
      <div class="burst-mascot-side">
        <img src="images/logo/BB.png" alt="BinBot mascot" class="burst-mascot">
      </div>
	  
	  <!-- Instruction Overlay -->
<div id="instruction-overlay" class="instruction-overlay">
  <div class="instruction-content">
    <button class="close-button" onclick="hideInstructions()">‚úñ</button>
    <h2>üåø How to Use BinBot AI</h2>
     <ul>
  <li>üå≥Start by clicking the <strong>Camera</strong> button in the Camera Controls to activate your camera.</li>
  <li>üå≥ Hold a common waste item in front of the camera and gently place it inside the dotted scan area.</li>
  <li>üå≥ Tap <strong>Identify Item</strong> to let BinBot scan and analyze the object.</li>
  <li>üå≥ BinBot will instantly tell you where to sort it ‚Äî into the <strong>Plastic</strong> <strong>Paper</strong> or <strong>Organic</strong> bin.</li>
  <li>üå≥ Use the <strong>Music Controls</strong> to switch background music on or off ‚Äî perfect for a calm sorting mood.</li>
  <li>üå≥ Click <strong>About BinBot AI</strong> to discover more about this eco-friendly project.</li>
  <li>üå≥ Click <strong>Want to Help the Planet</strong> to explore ways you can make a difference in your community.</li>
  <li>üå≥ Click the <strong>Reduce, Reuse, Recycle</strong> logo to learn more about sustainable living and waste reduction.</li>
  <li>üå≥Ô∏è Click on <strong>each Bin</strong> to learn what types of items belong in Plastic, Paper, or Organic categories.</li>
  <li>üå≥ Click <strong>Use BinBot on your Mobile</strong> and scan the QR code to try BinBot on your mobile device ‚Äî scan and sort anytime, anywhere!</li>
</ul>
    
  </div>
</div>

    </div>
  </div>
</div>
</body></html>
